<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="梁康伦,PHP,MySQL,liangkanglun,技术博客" />
        <meta name="description" content="梁康伦,PHP,MySQL,liangkanglun,技术博客 PHP集成开发工程师" />
        <title>梁康伦的博客</title>
        <link href="./css/bootstrap.min.css" rel="stylesheet">
        <style type="text/css">
            #title{width:100%; height:200px; background:#3DC5F9;}
            #ss{font-size:42px; top:60px; position:absolute; left:80px;}
            .form-group{position:absolute; left:700px; top:80px;}
            .container{width:100%;}
            .navbar-nav{margin-left:80px;}
            .navbar-nav li{margin-left:50px;}
            .column{margin-left:50px; border:1px solid #ddd;}

        </style>
    </head>
    <body>
        <div id="title">
            <span id="ss">梁康伦的博客</span>
            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    <input class="form-control" type="text" />
                    <button type="submit" class="btn btn-default">搜索</button>
                </div>
            </form>
        </div>
        <div class="container">
            <div class="row clearfix">
                    <nav class="navbar navbar-default" role="navigation">
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
                            <ul class="nav navbar-nav">
                                <li class="active">
                                     <a href="./index.html">首页</a>
                                </li>
                                <li>
                                     <a href="./phpbase.html">PHP</a>
                                </li>
                                <li>
                                     <a href="./master.html">MySQL</a>
                                </li>
                                <li>
                                     <a href="#">微信开发</a>
                                </li>
                                <li>
                                     <a href="#">git</a>
                                </li>
                                <li>
                                     <a href="#">工具</a>
                                </li>
                                <li>
                                     <a href="./zt.html">杂谈</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
            </div>
            <div class="row clearfix">
                <div class="col-md-7 column">
                    <h2>
                        如何在Linux上搭建git服务器
                    </h2>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><font size="4">作者：梁康伦</font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <span><font size="4">时间：2016年12月05日</font></span>
                    <br>
                    <br>
                        <div class="post-content">
                            <p>
                                <p>在使用Git，大部分开发者都是将<a href="http://www.github.com/" style="color:red;text-decoration:underline">Github</a>作为远程仓库。但是，当我们不想将代码开源，而且又有自己的服务器(以CentOS系统为例),那就可以自己搭建一台Git服务器作为自己的私有仓库。</p>

                              <p>
                                首先，你得有root权限。步骤如下：

                              </p>

                              <p>
                                第一步：安装<code>Git</code>
                                <p>
                                  <pre># yum -y install git</pre>

                                </p>

                              </p>
                              <p>
                                第二步：创建<code>Git</code>用户，这个用户是用来运行<code>Git</code>的。(可以不为这个用户设置密码)
                                <p>
                                  <pre>#useradd git</pre>

                                </p>

                              </p>

                              <p>
                                第三步：创建私钥公钥
                                <p>
                                  创建SSH Key，在用户主目录下(Window的在C:\Users\你的用户名\.ssh下)，在Window下打开Git Bash,使用如下命令创建
                                  <pre>ssh-keygen -t rsa -C "youremail@example.com"  //邮箱写你自己的</pre>

                                  <p>
                                      去到用户主目录里找到.ssh目录，有<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，<code>id_rsa</code>是私钥，不要泄露出去，<code>id_rsa.pub</code>是公钥，可以公开。

                                  </p>

                                  <p>

                                      将所有需要登录的用户的公钥，也就是<code>id_rsa.pub</code>文件的内容，把公钥放到<code>/home/git/.ssh/authorized_keys</code>文件里，一行一个。如果没有这个文件，就自行创建。
                                  </p>

                                </p>

                              </p>

                              <p>
                                第四步：初始化Git仓库
                                <p>
                                    先选定一个目录作为Git仓库，假设是<code>/usr/local/apache/htdocs/test/tmp.git</code>
                                    在<code>/usr/local/apache/htdocs/test/</code>目录下输入命令：
                                    <pre>git init --bare tmp.git //--bare表示创建裸仓库，只会生成用于记录版本库历史记录的.git文件。没有工作目录</pre>

                                    <p>
                                      授权：
                                      <pre>chown -R git:git tmp.git</pre>

                                    </p>
                                </p>
                                <p>
                                    第五步：不让git 用shell登录
                                    <p>
                                        为了安全，创建的git用户不可以登录shell,通过编译<code>/etc/passwd</code>文件,找到git用户
                                        <pre>git:x:505:505::/home/git:/usr/bin/bash</pre>
                                        <p>改成：</p>
                                        <pre>git:x:505:505::/home/git:/usr/bin/git-shell</pre>
                                    </p>

                                </p>



                              </p>

                              <p>
                                  最后一步，在你的Window电脑克隆远程仓库的代码

                                  <pre>git clone@ip:/usr/local/apache/htdocs/test/tmp.git</pre>

                                  例如：<img src="./fonts/17.png" alt="">

                              </p>

                            </p>

                        </div>
                    <br>
                    <br>
                </div>

                <div class="col-md-4 column">
                    <h3>博文链接</h3>
                    <ul>
                        <li>
                            <a href="./gd.html">GD库函数使用</a>
                        </li>
                        <li>
                            <a href="./git.html">如何在github上搭建自己的博客</a>
                        </li>
                        <li>
                            <a href="./master.html">MySQL主从配置</a>
                        </li>
                        <li>
                            <a href="./phpbase.html">echo print print_r var_dump的区别</a>
                        </li>
                        <li>
                            <a href="./phpnotice.html">50个提高PHP运行效率的细节</a>
                        </li>
                        <li>
                            <a href="./gitserver.html">如何在Linux搭建git服务器</a>
                        </li>
                        <li>
                            <a href="./yz.html">php-安全隐藏</a>
                        </li>
                        <li>
                            <a href="./upload.html">上传插件dropzone.js实例</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    </body>
</html