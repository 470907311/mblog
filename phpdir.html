<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="梁康伦,PHP,MySQL,liangkanglun,技术博客" />
        <meta name="description" content="梁康伦,PHP,MySQL,liangkanglun,技术博客 PHP集成开发工程师" />
        <title>梁康伦的博客</title>
        <link href="./css/bootstrap.min.css" rel="stylesheet">
        <style type="text/css">
            #title{width:100%; height:200px; background:#3DC5F9;}
            #ss{font-size:42px; top:60px; position:absolute; left:80px;}
            .form-group{position:absolute; left:700px; top:80px;}
            .container{width:100%;}
            .navbar-nav{margin-left:80px;}
            .navbar-nav li{margin-left:50px;}
            .column{margin-left:50px; border:1px solid #ddd;}

        </style>
    </head>
    <body>
        <div id="title">
            <span id="ss">梁康伦的博客</span>
            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    <input class="form-control" type="text" />
                    <button type="submit" class="btn btn-default">搜索</button>
                </div>
            </form>
        </div>
        <div class="container">
            <div class="row clearfix">
                    <nav class="navbar navbar-default" role="navigation">
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
                            <ul class="nav navbar-nav">
                                <li class="active">
                                     <a href="./index.html">首页</a>
                                </li>
                                <li>
                                     <a href="./phpbase.html">PHP</a>
                                </li>
                                <li>
                                     <a href="./master.html">MySQL</a>
                                </li>
                                <li>
                                     <a href="#">微信开发</a>
                                </li>
                                <li>
                                     <a href="#">git</a>
                                </li>
                                <li>
                                     <a href="#">工具</a>
                                </li>
                                <li>
                                     <a href="./zt.html">杂谈</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
            </div>
            <div class="row clearfix">
                <div class="col-md-7 column">
                    <h2>
                        PHP目录操作
                    </h2>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><font size="4">作者：梁康伦</font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <span><font size="4">时间：2017年01月06日</font></span>
                    <br>
                    <br>
                        <pre><code>
一. 遍历目录下所有文件

//要遍历的目录
$path = 'C:\phpStudy\WWW\gz01';

//调用函数
myDir($path);

//定义遍历目录所有文件
function myDir($path)
{
     //打开目录
    $source = opendir($path);

    //循环遍历目录
    //由于有些文件的名字可以是 0 while进行判断的时候 会返回false
    //就不会再循环了，在这里使用全等判断(下同)
    while (false !== ($filename = readdir($source))) {

        //跳过两层目录  . 跟 ..
        if ($filename == '.' || $filename == '..') continue;

        //路径处理
        $path = rtrim($path, '/') .'/';

        if (is_dir($path.$filename)) {
            //递归调用自己
            myDir($path.$filename);
        } else {
            //系统是gkb编码，需要转换成utf8才能正常输出
            echo $path.iconv('gbk', 'utf-8' ,$filename);
        }
    }

    //关闭目录
    closedir($source);
}



二.统计目录所有文件大小

//要统计大小的目录
$path = 'C:/tmp';

//调用函数并输出结果（返回的是字节单位）
echo dirSize($path);

//定义一个函数统计目录大小
function dirSize($path)
{
    //定义目录初始值
    $dirSize = 0;
     //打开目录
    $source = opendir($path);

    //循环遍历目录
    while (false !== ($filename = readdir($source))) {

        //跳过两层目录  . 跟 ..
        if ($filename == '.' || $filename == '..') continue;

        //路径处理
        $path = rtrim($path, '/') .'/';

        if (is_dir($path.$filename)) {
            //递归调用
            $dirSize += dirSize($path.$filename);
        }

        //获取文件大小并累加
        $dirSize += filesize($path.$filename);
    }

    //关闭目录
    closedir($source);
    //返回目录总大小
    return $dirSize;
}



三.删除目录下的所有文件

//定义要删除的目录
$path = '';

//调用删除目录函数
delDir($path);

//删除目录函数
function delDir($path)
{
    //判断文件是否存在
    if (!file_exists($path)) {
        return false;
    }

    //处理路径
    $path = rtrim($path, '/') .'/';

    //打开目录
    $source = opendir($path);

    //目录的遍历
    while (false !== $filename = readdir($source)) {

        //跳过两层目录  . 跟 ..
        if ($filename == '.' || $filename == '..') continue;

        if (is_dir($path.$filename)) {
            //递归删除文件
            del($path.$filename);
        } else {
            //删除文件
            unlink($path.$filename);
        }
    }

    //关闭目录
    closedir($source);

    //在关闭目录后，将空目录干掉
    rmdir($path);

}


</code></pre>
                <br>
                    <br>
                </div>

                <div class="col-md-4 column">
                    <h3>博文链接</h3>
                    <ul>
                        <li>
                            <a href="./gd.html">GD库函数使用</a>
                        </li>
                        <li>
                            <a href="./git.html">如何在github上搭建自己的博客</a>
                        </li>
                        <li>
                            <a href="./master.html">MySQL主从配置</a>
                        </li>
                        <li>
                            <a href="./phpbase.html">echo print print_r var_dump的区别</a>
                        </li>
                        <li>
                            <a href="./phpnotice.html">50个提高PHP运行效率的细节</a>
                        </li>
                        <li>
                            <a href="./gitserver.html">如何在Linux搭建git服务器</a>
                        </li>
                        <li>
                            <a href="./yz.html">php-安全隐藏</a>
                        </li>
                        <li>
                            <a href="./upload.html">上传插件dropzone.js实例</a>
                        </li>
                        <li>
                            <a href="./phpdir.html">php之目录操作</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    </body>
</html>
